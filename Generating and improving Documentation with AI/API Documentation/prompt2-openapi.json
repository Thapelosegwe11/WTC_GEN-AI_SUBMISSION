{
  "openapi": "3.0.3",
  "info": {
    "title": "Product API",
    "version": "1.0.0",
    "description": "API to fetch products with filtering, sorting, pagination, and retrieval by ID."
  },
  "paths": {
    "/products": {
      "get": {
        "summary": "Get all products",
        "description": "Retrieves a list of products with optional filtering, sorting, and pagination.",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "description": "Filter products by category name",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "name": "minPrice",
            "in": "query",
            "description": "Minimum price filter",
            "required": false,
            "schema": { "type": "number", "format": "float" }
          },
          {
            "name": "maxPrice",
            "in": "query",
            "description": "Maximum price filter",
            "required": false,
            "schema": { "type": "number", "format": "float" }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Field to sort by (default: createdAt)",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "name": "order",
            "in": "query",
            "description": "Sort order (asc or desc, default: desc)",
            "required": false,
            "schema": { "type": "string", "enum": ["asc", "desc"] }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number for pagination (default: 1)",
            "required": false,
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of products per page (default: 20)",
            "required": false,
            "schema": { "type": "integer", "default": 20 }
          },
          {
            "name": "inStock",
            "in": "query",
            "description": "If true, returns only products with stockQuantity > 0",
            "required": false,
            "schema": { "type": "boolean" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products with pagination info",
            "content": {
              "application/json": {
                "example": {
                  "products": [
                    {
                      "_id": "65fa12ab45cd678901234567",
                      "name": "Wireless Headphones",
                      "category": "electronics",
                      "price": 120.99,
                      "stockQuantity": 15,
                      "createdAt": "2026-02-20T10:00:00.000Z"
                    }
                  ],
                  "pagination": {
                    "total": 150,
                    "page": 1,
                    "limit": 20,
                    "pages": 8
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "error": "Server error",
                  "message": "Failed to fetch products"
                }
              }
            }
          }
        }
      }
    },
    "/products/{productId}": {
      "get": {
        "summary": "Get product by ID",
        "description": "Retrieves a single product by its unique identifier.",
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "description": "Unique identifier of the product",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product found",
            "content": {
              "application/json": {
                "example": {
                  "_id": "65fa12ab45cd678901234567",
                  "name": "Wireless Headphones",
                  "category": "electronics",
                  "price": 120.99,
                  "stockQuantity": 15,
                  "createdAt": "2026-02-20T10:00:00.000Z"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format",
            "content": {
              "application/json": {
                "example": {
                  "error": "Invalid ID",
                  "message": "Invalid product ID format"
                }
              }
            }
          },
          "404": {
            "description": "Product not found",
            "content": {
              "application/json": {
                "example": {
                  "error": "Not found",
                  "message": "Product not found"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "example": {
                  "error": "Server error",
                  "message": "Failed to fetch product"
                }
              }
            }
          }
        }
      }
    }
  }
}